(this["webpackJsonpomakase-subscription-app"]=this["webpackJsonpomakase-subscription-app"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),i=n(4),c=n.n(i),a=n(2),o=(n(13),n(0));const l={app:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"30px 40px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},navBtn:{fontSize:"24px",background:"rgba(255,255,255,0.2)",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer"},main:{maxWidth:"1000px",margin:"40px auto",padding:"0 20px"},container:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},card:{background:"white",padding:"20px",borderRadius:"8px",marginBottom:"15px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},features:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"40px"},feature:{background:"white",padding:"30px",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},icon:{fontSize:"40px",marginBottom:"10px"},buttons:{display:"flex",gap:"15px",justifyContent:"center"},buttonPrimary:{background:"#667eea",color:"white",padding:"12px 40px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"500"},buttonSecondary:{background:"white",color:"#667eea",padding:"12px 40px",border:"2px solid #667eea",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"500"},input:{width:"100%",padding:"10px 15px",marginBottom:"15px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",boxSizing:"border-box"},button:{width:"100%",padding:"10px 15px",background:"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},link:{background:"none",border:"none",color:"#667eea",cursor:"pointer",marginLeft:"5px",textDecoration:"underline"},error:{background:"#fee",color:"#c00",padding:"10px 15px",borderRadius:"4px",marginBottom:"15px"}};var d=()=>{const[e,t]=Object(r.useState)("home"),[n,s]=Object(r.useState)(null),[i,c]=Object(r.useState)(localStorage.getItem("token")),[d,j]=Object(r.useState)(!1),[p,b]=Object(r.useState)(null),[h,x]=Object(r.useState)({email:"",password:""}),[u,O]=Object(r.useState)({username:"",email:"",password:""}),[g,y]=Object(r.useState)([]);Object(r.useEffect)(()=>{if(i)try{const e=JSON.parse(atob(i.split(".")[1]));s(e),m()}catch(e){console.error("Token error:",e),c(null)}},[i]);const m=async()=>{try{const e=await fetch("http://localhost:5000/api/subscriptions",{headers:{Authorization:"Bearer ".concat(i)}});if(e.ok){const t=await e.json();y(t.subscriptions||[])}}catch(e){console.error("Error:",e)}},f=async e=>{e.preventDefault(),j(!0),b(null);try{const e=await fetch("http://localhost:5000/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(e.ok){const n=await e.json();c(n.token),localStorage.setItem("token",n.token),x({email:"",password:""}),t("home")}else{const t=await e.json();b(t.error||"\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}}catch(n){b("\u30a8\u30e9\u30fc: "+n.message)}finally{j(!1)}},v=async e=>{e.preventDefault(),j(!0),b(null);try{const e=await fetch("http://localhost:5000/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(e.ok)O({username:"",email:"",password:""}),t("login"),alert("\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002");else{const t=await e.json();b(t.error||"\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}}catch(n){b("\u30a8\u30e9\u30fc: "+n.message)}finally{j(!1)}};return i?Object(o.jsxs)("div",{style:l.app,children:[Object(o.jsx)("header",{style:l.header,children:Object(o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(o.jsx)("h1",{children:"\ud83c\udf81 \u304a\u307e\u304b\u305b\u5b9a\u671f\u4fbf"}),Object(o.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Object(o.jsx)("button",{onClick:()=>t("home"),style:l.navBtn,children:"\ud83c\udfe0"}),Object(o.jsx)("button",{onClick:()=>t("subscriptions"),style:l.navBtn,children:"\ud83d\udce6"}),Object(o.jsx)("button",{onClick:()=>{c(null),s(null),localStorage.removeItem("token"),t("home")},style:l.navBtn,children:"\ud83d\udeaa"})]})]})}),p&&Object(o.jsx)("p",{style:l.error,children:p}),Object(o.jsxs)("main",{style:l.main,children:["home"===e&&Object(o.jsxs)("div",{children:[Object(o.jsxs)("h2",{children:["\u3088\u3046\u3053\u305d\uff01",(null===n||void 0===n?void 0:n.email)||"\u30e6\u30fc\u30b6\u30fc"]}),0===g.length?Object(o.jsx)("p",{style:{textAlign:"center",padding:"40px"},children:"\ud83d\udce6 \u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u304c\u307e\u3060\u3042\u308a\u307e\u305b\u3093"}):Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"\u3042\u306a\u305f\u306e\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3"}),g.map(e=>Object(o.jsxs)("div",{style:l.card,children:[Object(o.jsx)("h4",{children:e.category_name}),Object(o.jsxs)("p",{children:["\u30d7\u30e9\u30f3: ",e.plan]}),Object(o.jsxs)("p",{children:["\u6b21\u56de\u914d\u9001: ",new Date(e.next_delivery_date).toLocaleDateString("ja-JP")]}),Object(o.jsxs)("p",{children:["\u30b9\u30c6\u30fc\u30bf\u30b9: ",e.status]})]},e.id))]})]}),"subscriptions"===e&&Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"\ud83d\udce6 \u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u7ba1\u7406"}),0===g.length?Object(o.jsx)("p",{style:{textAlign:"center",padding:"40px"},children:"\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u305b\u3093"}):g.map(e=>Object(o.jsxs)("div",{style:l.card,children:[Object(o.jsx)("h3",{children:e.category_name}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"\u30d7\u30e9\u30f3:"})," ",e.plan]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"\u6b21\u56de\u914d\u9001:"})," ",new Date(e.next_delivery_date).toLocaleDateString("ja-JP")]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"\u30b9\u30c6\u30fc\u30bf\u30b9:"})," ",e.status]})]},e.id))]})]})]}):"register"===e?Object(o.jsx)("div",{style:l.container,children:Object(o.jsxs)("div",{style:l.card,children:[Object(o.jsx)("h2",{children:"\u65b0\u898f\u4f1a\u54e1\u767b\u9332"}),p&&Object(o.jsx)("p",{style:l.error,children:p}),Object(o.jsxs)("form",{onSubmit:v,children:[Object(o.jsx)("input",{style:l.input,type:"text",placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d",value:u.username,onChange:e=>O(Object(a.a)(Object(a.a)({},u),{},{username:e.target.value})),required:!0}),Object(o.jsx)("input",{style:l.input,type:"email",placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",value:u.email,onChange:e=>O(Object(a.a)(Object(a.a)({},u),{},{email:e.target.value})),required:!0}),Object(o.jsx)("input",{style:l.input,type:"password",placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9",value:u.password,onChange:e=>O(Object(a.a)(Object(a.a)({},u),{},{password:e.target.value})),required:!0}),Object(o.jsx)("button",{type:"submit",style:l.button,disabled:d,children:d?"\u767b\u9332\u4e2d...":"\u767b\u9332"})]}),Object(o.jsxs)("p",{children:["\u65e2\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u3059\u304b\uff1f",Object(o.jsx)("button",{onClick:()=>t("login"),style:l.link,children:"\u30ed\u30b0\u30a4\u30f3"})]})]})}):"login"===e?Object(o.jsx)("div",{style:l.container,children:Object(o.jsxs)("div",{style:l.card,children:[Object(o.jsx)("h2",{children:"\u30ed\u30b0\u30a4\u30f3"}),p&&Object(o.jsx)("p",{style:l.error,children:p}),Object(o.jsxs)("form",{onSubmit:f,children:[Object(o.jsx)("input",{style:l.input,type:"email",placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",value:h.email,onChange:e=>x(Object(a.a)(Object(a.a)({},h),{},{email:e.target.value})),required:!0}),Object(o.jsx)("input",{style:l.input,type:"password",placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9",value:h.password,onChange:e=>x(Object(a.a)(Object(a.a)({},h),{},{password:e.target.value})),required:!0}),Object(o.jsx)("button",{type:"submit",style:l.button,disabled:d,children:d?"\u30ed\u30b0\u30a4\u30f3\u4e2d...":"\u30ed\u30b0\u30a4\u30f3"})]}),Object(o.jsxs)("p",{children:["\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u65b9\uff1f",Object(o.jsx)("button",{onClick:()=>t("register"),style:l.link,children:"\u767b\u9332"})]})]})}):Object(o.jsxs)("div",{style:l.app,children:[Object(o.jsxs)("header",{style:l.header,children:[Object(o.jsx)("h1",{children:"\ud83c\udf81 \u304a\u307e\u304b\u305b\u5b9a\u671f\u4fbf"}),Object(o.jsx)("p",{children:"\u3042\u306a\u305f\u306e\u597d\u307f\u3092\u5206\u6790\u3057\u3066\u3001\u6bce\u6708\u304a\u3059\u3059\u3081\u3092\u304a\u5c4a\u3051\u3057\u307e\u3059"})]}),Object(o.jsxs)("main",{style:l.main,children:[Object(o.jsxs)("div",{style:l.features,children:[Object(o.jsxs)("div",{style:l.feature,children:[Object(o.jsx)("div",{style:l.icon,children:"\u2615"}),Object(o.jsx)("h3",{children:"\u591a\u69d8\u306a\u30ab\u30c6\u30b4\u30ea"}),Object(o.jsx)("p",{children:"\u69d8\u3005\u306a\u30ab\u30c6\u30b4\u30ea\u304b\u3089\u9078\u629e\u3067\u304d\u307e\u3059"})]}),Object(o.jsxs)("div",{style:l.feature,children:[Object(o.jsx)("div",{style:l.icon,children:"\u2b50"}),Object(o.jsx)("h3",{children:"AI\u8a3a\u65ad\u30af\u30a4\u30ba"}),Object(o.jsx)("p",{children:"\u3042\u306a\u305f\u306e\u597d\u307f\u3092\u5206\u6790\u3057\u3066\u304a\u3059\u3059\u3081"})]}),Object(o.jsxs)("div",{style:l.feature,children:[Object(o.jsx)("div",{style:l.icon,children:"\ud83d\udcc5"}),Object(o.jsx)("h3",{children:"\u5b9a\u671f\u914d\u9001"}),Object(o.jsx)("p",{children:"\u914d\u9001\u983b\u5ea6\u3092\u9078\u3079\u307e\u3059"})]}),Object(o.jsxs)("div",{style:l.feature,children:[Object(o.jsx)("div",{style:l.icon,children:"\ud83d\udce6"}),Object(o.jsx)("h3",{children:"\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u7ba1\u7406"}),Object(o.jsx)("p",{children:"\u914d\u9001\u65e5\u3092\u78ba\u8a8d\u30fb\u7ba1\u7406\u3067\u304d\u307e\u3059"})]})]}),Object(o.jsxs)("div",{style:l.buttons,children:[Object(o.jsx)("button",{onClick:()=>t("login"),style:l.buttonPrimary,children:"\u30ed\u30b0\u30a4\u30f3"}),Object(o.jsx)("button",{onClick:()=>t("register"),style:l.buttonSecondary,children:"\u65b0\u898f\u767b\u9332"})]})]})]})};c.a.createRoot(document.getElementById("root")).render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(d,{})}))}},[[15,1,2]]]);
//# sourceMappingURL=main.1a0d2f4f.chunk.js.map